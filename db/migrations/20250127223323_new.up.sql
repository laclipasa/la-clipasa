-- modify "posts" table
ALTER TABLE "posts" ALTER COLUMN "categories" TYPE post_categories, ADD COLUMN "deleted_at" timestamptz NULL, ADD COLUMN "user_posts" bigint NULL, ADD CONSTRAINT "posts_users_posts" FOREIGN KEY ("user_posts") REFERENCES "users" ("id") ON DELETE SET NULL;
-- create "comments" table
CREATE TABLE "comments" ("id" bigint NOT NULL GENERATED BY DEFAULT AS IDENTITY, "content" character varying NOT NULL, "created_at" timestamptz NOT NULL, "updated_at" timestamptz NOT NULL, "deleted_at" timestamptz NULL, "post_comments" bigint NULL, "user_comments" bigint NULL, PRIMARY KEY ("id"), CONSTRAINT "comments_posts_comments" FOREIGN KEY ("post_comments") REFERENCES "posts" ("id") ON DELETE SET NULL, CONSTRAINT "comments_users_comments" FOREIGN KEY ("user_comments") REFERENCES "users" ("id") ON DELETE SET NULL);
